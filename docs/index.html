<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Title -->
		<script>
			try {
				const path = window.location.pathname;
				let repoName = path.split("/").filter(Boolean).pop() || "Home";
				repoName = repoName.replace(/[-_]/g, " ");
				repoName = repoName.replace(/\b\w/g, (c) => c.toUpperCase());

				document.title =
					repoName + " | " + "The Perfect Developer | Github";
			} catch (error) {
				document.title = "The Perfect Developer | Github";
				console.error("Error setting title:", error);
			}
		</script>

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Reveal.js CSS -->
		<link
			rel="stylesheet"
			href="https://unpkg.com/reveal.js/dist/reveal.css"
		/>
		<link
			rel="stylesheet"
			href="https://unpkg.com/reveal.js/dist/theme/black.css"
			id="theme"
		/>
		<!-- Highlight.js CSS for syntax highlighting -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
		/>

		<style>
			section {
				font-size: 1.5em;
			}

			/* VS Code-like editor styling - DEFAULT for ALL code blocks */
			.hljs {
				background: #1e1e1e !important;
				border-radius: 8px;
				position: relative;
				padding: 52px 20px 40px 20px !important;
				margin: 40px 0 20px 0;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
				border: 1px solid #333;
			}

			/* Ensure consistent styling for all pre code blocks */
			pre code {
				border-radius: 8px !important;
				padding: 52px 20px 40px 20px !important;
				margin: 40px 0 20px 0 !important;
			}

			/* Fix for reveal.js code blocks to maintain consistent styling */
			.reveal pre {
				border-radius: 8px !important;
				margin: 40px 0 20px 0 !important;
			}

			.reveal pre code {
				border-radius: 8px !important;
				padding: 52px 20px 40px 20px !important;
				margin: 0 !important;
				max-height: none !important;
			}

			/* Remove all pseudo-elements to prevent duplication */
			.hljs::before,
			.hljs::after {
				display: none !important;
			}

			/* Window header with controls and filename */
			.code-window-header {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				height: 32px;
				background: #2d2d30;
				border-radius: 8px 8px 0 0;
				display: flex;
				align-items: center;
				padding: 0 12px;
				font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono",
					Consolas, "Courier New", monospace;
				font-size: 12px;
				color: #cccccc;
				z-index: 10;
			}

			/* Mac-style window controls */
			.window-controls {
				display: flex;
				gap: 8px;
				margin-right: 12px;
			}

			.window-controls span {
				width: 12px;
				height: 12px;
				border-radius: 50%;
			}

			.window-controls .close {
				background: #ff5f57;
			}
			.window-controls .minimize {
				background: #ffbd2e;
			}
			.window-controls .maximize {
				background: #28ca42;
			}

			.filename {
				flex: 1;
			}

			/* Line numbers styling */
			.hljs-ln-numbers {
				color: #858585 !important;
				padding-right: 40px !important;
				border-right: 1px solid #333 !important;
				margin-right: 20px !important;
				user-select: none;
			}

			/* Additional spacing for line numbers - higher specificity */
			.reveal .hljs-ln-numbers,
			pre code .hljs-ln-numbers,
			.hljs .hljs-ln-numbers {
				padding-right: 40px !important;
				margin-right: 20px !important;
			}

			/* Ensure spacing for line number code content */
			.hljs-ln-code {
				padding-left: 20px !important;
			}

			/* Better code font */
			pre code {
				font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono",
					Consolas, "Courier New", monospace !important;
				font-size: 0.9em !important;
				line-height: 1.5 !important;
			}

			/* Terminal-specific styling for bash/shell/console blocks */
			.language-bash .hljs,
			.language-shell .hljs,
			.language-console .hljs,
			.language-terminal .hljs {
				background: #1e1e1e !important;
				border: 1px solid #333;
				border-radius: 8px !important;
				padding: 52px 20px 40px 20px !important;
				position: relative;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
				margin: 40px 0 20px 0 !important;
			}

			/* Ensure terminal pre blocks also have consistent styling */
			pre.language-bash,
			pre.language-shell,
			pre.language-console,
			pre.language-terminal {
				border-radius: 8px !important;
				margin: 40px 0 20px 0 !important;
			}

			/* Terminal window controls (same red/yellow/green but for terminal) */
			.language-bash .hljs::before,
			.language-shell .hljs::before,
			.language-console .hljs::before,
			.language-terminal .hljs::before {
				content: "";
				position: absolute;
				top: 12px;
				left: 16px;
				width: 12px;
				height: 12px;
				border-radius: 50%;
				background: #ff5f57;
				box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #28ca42;
			}

			/* Terminal title bar - Higher specificity to override default */
			pre.language-bash code.hljs::after,
			pre.language-shell code.hljs::after,
			pre.language-console code.hljs::after,
			pre.language-terminal code.hljs::after,
			.language-bash .hljs::after,
			.language-shell .hljs::after,
			.language-console .hljs::after,
			.language-terminal .hljs::after {
				content: "Terminal" !important;
				position: absolute !important;
				top: 8px;
				left: 80px;
				right: 16px;
				height: 24px;
				background: #2d2d30 !important;
				border-radius: 4px 4px 0 0;
				font-size: 12px;
				color: #cccccc;
				display: flex;
				align-items: center;
				padding: 0 12px;
				font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono",
					Consolas, "Courier New", monospace;
			}

			/* No line numbers for terminal */
			.language-bash .hljs-ln-numbers,
			.language-shell .hljs-ln-numbers,
			.language-console .hljs-ln-numbers,
			.language-terminal .hljs-ln-numbers {
				display: none !important;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- Markdown file will be loaded here -->
				<section
					data-markdown="slides.md"
					data-separator="^---$"
					data-separator-vertical="^\*\*\*$"
					data-separator-notes="^Note:"
					data-charset="utf-8"
				></section>
			</div>
		</div>

		<!-- Reveal.js and plugins -->
		<script src="https://unpkg.com/reveal.js/dist/reveal.js"></script>
		<script src="https://unpkg.com/reveal.js/plugin/markdown/markdown.js"></script>
		<script src="https://unpkg.com/reveal.js/plugin/highlight/highlight.js"></script>

		<script>
			Reveal.initialize({
				hash: true,
				plugins: [RevealMarkdown, RevealHighlight],
				slideNumber: true,
				transition: "fade",
				autoAnimate: true,
				highlight: {
					highlightOnLoad: true,
					lineNumbers: true,
				},
			});

			// Custom filename support
			Reveal.addEventListener("ready", function () {
				updateCodeBlockFilenames();
				// Also run after delays to catch late-loading content
				setTimeout(updateCodeBlockFilenames, 200);
				setTimeout(updateCodeBlockFilenames, 500);
			});

			Reveal.addEventListener("slidechanged", function () {
				updateCodeBlockFilenames();
			});

			// Run immediately for any existing content
			setTimeout(updateCodeBlockFilenames, 100);

			// Also run when DOM is loaded
			document.addEventListener("DOMContentLoaded", function () {
				updateCodeBlockFilenames();
			});

			function updateCodeBlockFilenames() {
				// Remove any existing headers first
				document
					.querySelectorAll(".code-window-header")
					.forEach((header) => header.remove());

				// Handle all code blocks (both with and without .hljs class)
				document.querySelectorAll("pre code").forEach(function (code) {
					// Skip if this code block already has a header
					if (
						code.parentElement.querySelector(".code-window-header")
					) {
						return;
					}

					const pre = code.closest("pre");
					const section = code.closest("section");

					// Determine filename
					let filename = "The Perfect Developer";

					// Check for custom filename from data attribute
					if (pre && pre.getAttribute("data-filename")) {
						filename = pre.getAttribute("data-filename");
					} else if (
						section &&
						section.getAttribute("data-filename")
					) {
						filename = section.getAttribute("data-filename");
					}

					// Check if it's a terminal block
					const dataLang = pre
						? pre.getAttribute("data-language")
						: "";
					const classList = code.className;
					const isTerminal =
						(dataLang && dataLang.includes("bash")) ||
						classList.includes("bash") ||
						classList.includes("shell") ||
						classList.includes("console") ||
						classList.includes("terminal");

					if (isTerminal) {
						filename = "Terminal";
						// Hide line numbers for terminal
						const lineNumbers =
							code.querySelectorAll(".hljs-ln-numbers");
						lineNumbers.forEach(
							(ln) => (ln.style.display = "none")
						);
					}

					// Create window header
					const header = document.createElement("div");
					header.className = "code-window-header";
					header.innerHTML = `
						<div class="window-controls">
							<span class="close"></span>
							<span class="minimize"></span>
							<span class="maximize"></span>
						</div>
						<div class="filename">${filename}</div>
					`;

					// Insert header into the code container
					const container = code.parentElement;
					container.style.position = "relative";
					container.insertBefore(header, code);
				});
			}
		</script>
	</body>
</html>
